<!DOCTYPE html>
<html>
<head>
	<title>Онлайн-чат</title>
	<style type="text/css">
		#chat-container {
			height: 400px;
			overflow-y: scroll;
		}
	</style>
</head>
<body>
	<div id="chat-container"></div>
	<form id="message-form">
		<input type="text" name="message">
		<button type="submit">Отправить</button>
	</form>

	<script type="text/javascript">
		const chatContainer = document.querySelector('#chat-container');
		const messageForm = document.querySelector('#message-form');

		// Функция добавления сообщения в контейнер
		function addMessageToContainer(message) {
			const messageElement = document.createElement('div');
			messageElement.innerText = message;

			chatContainer.appendChild(messageElement);
		}

		// Обработчик отправки сообщения
		messageForm.addEventListener('submit', (event) => {
			event.preventDefault();

			const messageInput = messageForm.querySelector('input[name="message"]');
			const messageText = messageInput.value;

			// Отправка сообщения на сервер и получение ответа
			// ...

			// Добавление сообщения в контейнер
			addMessageToContainer(messageText);

			// Очистка поля ввода
			messageInput.value = '';
		});
		const socket = new WebSocket('ws://localhost:3000');

// Обработчик соединения с сервером
socket.addEventListener('open', (event) => {
    console.log('Соединение установлено');

    // Отправка начального сообщения после подключения к серверу
    socket.send('Привет, я новый пользователь');
});

// Обработчик получения сообщения от сервера
socket.addEventListener('message', (event) => {
    const receivedMessage = event.data;
    console.log(`Получено сообщение: ${receivedMessage}`);

    // Добавление сообщения в контейнер
    addMessageToContainer(receivedMessage);
});

// Обработчик ошибки подключения к серверу
socket.addEventListener('error', (event) => {
    console.error('Ошибка подключения:', event);
});

// Обработчик закрытия соединения с сервером
socket.addEventListener('close', (event) => {
    console.log('Соединение закрыто');
});

// Функция отправки сообщения на сервер
function sendMessageToServer(message) {
    socket.send(message);
}


	</script>
</body>
</html>
